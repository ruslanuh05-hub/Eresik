# Как сделать, чтобы работал поиск по @username (аватарка и ник)

Сообщение «Проверьте API» или «Сервер бота недоступен» значит: сайт не может достучаться до бота. Ниже — что сделать по шагам.

---

## Вариант 1: Вы открываете мини-приложение с того же ПК, где запущен бот

1. Запустите бота:
   ```bash
   python bot.py
   ```
   Должно появиться: `HTTP API сервер запущен на порту 3000`.

2. В **config.js** должно быть:
   ```javascript
   window.JET_API_BASE = 'http://localhost:3000';
   ```

3. Открывайте мини-приложение **с этого же компьютера** (например, в браузере: `http://localhost:3000` или ваш локальный сервер, который отдаёт index.html).  
   Если открывать jetstoreapp.ru с телефона или другого ПК — localhost не сработает, нужен вариант 2.

---

## Вариант 2: Открываете с телефона или с сайта jetstoreapp.ru

Сайт jetstoreapp.ru (GitHub Pages) и бот — это разные места. Бот должен быть доступен по **публичному адресу в интернете**.

### Шаг 1: Сделать бота доступным из интернета

**Вариант А — туннель ngrok (для теста):**

1. Скачайте [ngrok](https://ngrok.com/download).
2. Запустите бота: `python bot.py`.
3. В другом терминале:
   ```bash
   ngrok http 3000
   ```
4. Скопируйте адрес вида `https://xxxx-xx-xx.ngrok-free.app` — это публичный адрес вашего бота.

**Вариант Б — VPS (постоянно):**

- Разместите бота на VPS (Beget, Timeweb, и т.п.), настройте домен (например, `api.jetstoreapp.ru`) и прокси/порт на 3000.

### Шаг 2: Указать этот адрес в config.js

В файле **config.js** в корне mini_app пропишите **публичный** адрес бота (без слэша в конце):

```javascript
// Туннель ngrok (подставьте свой URL из шага 1):
window.JET_API_BASE = 'https://xxxx-xx-xx.ngrok-free.app';

// Или ваш VPS/домен:
// window.JET_API_BASE = 'https://api.jetstoreapp.ru';
```

### Шаг 3: Залить обновлённый config.js на сайт

- Если сайт на **GitHub Pages** (jetstoreapp.ru): измените **config.js** в репозитории и сделайте push — после деплоя новый адрес подхватится.
- Если сайт на хостинге: залейте обновлённый **config.js** в корень сайта (туда, где лежит index.html).

### Шаг 4: Проверить

1. Бот запущен (`python bot.py`).
2. Если используете ngrok — туннель запущен (`ngrok http 3000`).
3. В мини-приложении введите любой @username — должна появиться аватарка и имя (если Telethon настроен в `telethon_config.json`).

---

## Кратко

| Где открываете сайт      | Что указать в config.js                    |
|--------------------------|-------------------------------------------|
| Тот же ПК, где бот       | `http://localhost:3000`                   |
| Телефон / jetstoreapp.ru | Публичный URL бота (ngrok или VPS/домен)  |

После изменения **config.js** обязательно заново залейте его на хостинг (GitHub/сервер), иначе сайт будет использовать старый адрес.
